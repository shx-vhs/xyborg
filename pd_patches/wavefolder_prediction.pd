#N canvas 341 1111 1280 747 12;
#X obj 175 128 spigot;
#X msg 175 161 predict \$1 \$2 \$3;
#X obj 217 92 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X text 605 96 enable prediction;
#X obj 175 215 neuralnet;
#X obj 151 580 ws.singlefold~;
#X obj 158 603 ws.singlefold~;
#X obj 168 628 ws.singlefold~;
#X obj 155 437 *~;
#X obj 172 654 clip~ -1 1;
#X obj 838 998 s folds;
#X obj 888 999 s low1;
#X obj 935 999 s up1;
#X obj 977 997 s low2;
#X obj 1023 997 s up2;
#X obj 1063 997 s low3;
#X obj 1111 997 s up3;
#X obj 896 949 unpack f f f f f f f;
#X obj 848 1008 s folds;
#X obj 898 1009 s low1;
#X obj 945 1009 s up1;
#X obj 987 1007 s low2;
#X obj 1033 1007 s up2;
#X obj 1073 1007 s low3;
#X obj 1121 1007 s up3;
#X obj 906 959 unpack f f f f f f f;
#X obj 174 249 unpack f f f f f f f;
#X obj 172 707 outlet~;
#X obj 169 40 inlet;
#X obj 219 40 inlet;
#X obj 327 132 loadbang;
#X obj 236 322 line;
#X obj 290 345 line;
#X obj 343 363 line;
#X obj 386 392 line;
#X obj 439 410 line;
#X obj 493 433 line;
#X obj 173 355 clip 0.8 20;
#X obj 256 388 clip -1 1;
#X obj 174 324 line;
#X obj 182 397 sig~;
#X obj 271 413 clip -1 1;
#X obj 282 439 clip -1 1;
#X obj 297 464 clip -1 1;
#X obj 323 490 clip -1 1;
#X obj 338 515 clip -1 1;
#X msg 174 294 \$1 200;
#X msg 236 292 \$1 30;
#X msg 290 315 \$1 30;
#X msg 343 333 \$1 30;
#X msg 386 362 \$1 30;
#X msg 439 380 \$1 30;
#X msg 493 403 \$1 30;
#X msg 326 161 load wavefolder.ann;
#X obj 170 680 *~ 1;
#X text 610 163 Loading the model;
#X text 611 212 ANN framework based on https://github.com/alexdrymonitis/neuralnet;
#X text 613 285 Ramps between values to ensure smooth interpolation.;
#X text 612 349 Values also get clipped to avoid unwanted distortion.;
#X text 614 568 Three single wavefold objects in series allow for a rich spectrum of distortion timbres and a custom waveshaper. Fully taken from Mike Moreno's awesome pd-patch library: https://github.com/MikeMorenoDSP/pd-mkmr;
#X text 605 32 In this patch \, a previously trained ML regression model is loaded and values are predicted. These values provide parameters for a custom wavefolder \, thus creating a distortion effect.;
#X text 614 656 Clipping for safety;
#X obj 59 40 inlet~ audio;
#X connect 0 0 1 0;
#X connect 1 0 4 0;
#X connect 2 0 0 1;
#X connect 4 0 26 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 9 0;
#X connect 8 0 5 0;
#X connect 9 0 54 0;
#X connect 17 0 10 0;
#X connect 17 1 11 0;
#X connect 17 2 12 0;
#X connect 17 3 13 0;
#X connect 17 4 14 0;
#X connect 17 5 15 0;
#X connect 17 6 16 0;
#X connect 25 0 18 0;
#X connect 25 1 19 0;
#X connect 25 2 20 0;
#X connect 25 3 21 0;
#X connect 25 4 22 0;
#X connect 25 5 23 0;
#X connect 25 6 24 0;
#X connect 26 0 46 0;
#X connect 26 1 47 0;
#X connect 26 2 48 0;
#X connect 26 3 49 0;
#X connect 26 4 50 0;
#X connect 26 5 51 0;
#X connect 26 6 52 0;
#X connect 28 0 0 0;
#X connect 29 0 2 0;
#X connect 30 0 53 0;
#X connect 31 0 38 0;
#X connect 32 0 41 0;
#X connect 33 0 42 0;
#X connect 34 0 43 0;
#X connect 35 0 44 0;
#X connect 36 0 45 0;
#X connect 37 0 40 0;
#X connect 38 0 5 1;
#X connect 39 0 37 0;
#X connect 40 0 8 1;
#X connect 41 0 5 2;
#X connect 42 0 6 1;
#X connect 43 0 6 2;
#X connect 44 0 7 1;
#X connect 45 0 7 2;
#X connect 46 0 39 0;
#X connect 47 0 31 0;
#X connect 48 0 32 0;
#X connect 49 0 33 0;
#X connect 50 0 34 0;
#X connect 51 0 35 0;
#X connect 52 0 36 0;
#X connect 53 0 4 0;
#X connect 54 0 27 0;
#X connect 62 0 8 0;
